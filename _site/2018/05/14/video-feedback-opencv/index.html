<!DOCTYPE html>
<html>
<head>
	<meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="theme-color" content="#26C6DA">
    <meta name="description" content="Last week, I had some free time so I set up OpenCV on my computer, pulled out a thrift store webcam, and started tinkering.">
    <meta name="robots" content="index,follow">
	<meta name="googlebot" content="index,follow">
	<meta name="google-site-verification" content="verification_token"><!-- Google Search Console -->
	<meta name="yandex-verification" content="verification_token"><!-- Yandex Webmasters -->
	<meta name="msvalidate.01" content="verification_token"><!-- Bing Webmaster Center -->
	<meta name="p:domain_verify" content="code_from_pinterest"><!-- Pinterest Console-->
	<meta name="norton-safeweb-site-verification" content="norton_code"><!-- Norton Safe Web -->
	<meta name="rating" content="General">
	<meta name="geo.region" content="US-MI" />
	<meta name="geo.placename" content="Detroit" />
	<meta property="og:url" content="http://localhost:4000/2018/05/14/video-feedback-opencv/">
	<meta property="og:type" content="website">
	<meta property="og:title" content="Feedback Loops with OpenCV&nbsp;//&nbsp;Max Wirt Maximum Website">
	<meta property="og:image" content="http://localhost:4000/assets/img/opencv/opencvloop9.jpg">
	<meta property="og:description" content="Last week, I had some free time so I set up OpenCV on my computer, pulled out a thrift store webcam, and started tinkering.">
	<meta property="og:site_name" content="Max Wirt Maximum Website">
	<meta property="og:locale" content="en_US">
	<meta name="twitter:card" content="summary_large_image">
	<meta name="twitter:site" content="@site_account"><!--@username of website. Either twitter:site or twitter:site:id is required.-->
	<meta name="twitter:url" content="http://localhost:4000/2018/05/14/video-feedback-opencv/">
	<meta name="twitter:title" content="Feedback Loops with OpenCV&nbsp;//&nbsp;Max Wirt Maximum Website">
	<meta name="twitter:description" content="Last week, I had some free time so I set up OpenCV on my computer, pulled out a thrift store webcam, and started tinkering.">
	<meta name="twitter:image" content="http://localhost:4000/assets/img/opencv/opencvloop9.jpg">
	<link rel="apple-touch-icon" sizes="180x180" href="/apple-touch-icon.png">
	<link rel="icon" type="image/png" sizes="32x32" href="/favicon-32x32.png">
	<link rel="icon" type="image/png" sizes="16x16" href="/favicon-16x16.png">
	<link rel="manifest" href="/site.webmanifest">
	<link rel="mask-icon" href="/safari-pinned-tab.svg" color="#26C6DA">
	<meta name="msapplication-TileColor" content="#26C6DA">
	<title>Feedback Loops with OpenCV&nbsp;//&nbsp;Max Wirt Maximum Website</title>
	<link href="https://afeld.github.io/emoji-css/emoji.css" rel="stylesheet">
	<link rel="stylesheet" type="text/css" href="/assets/css/main.css">
	<script type="text/javascript" src="/assets/js/jquery-3.3.1.min.js"></script>
	<script type="text/javascript" src="/assets/js/bootstrap.min.js"></script>
	<script type="text/javascript" src="/assets/js/lightbox.min.js"></script>
	<script type="text/javascript" src="/assets/js/fontawesome-all.min.js"></script>
	<script type="text/javascript" src="/assets/js/webfont.js"></script>
	<script type="text/javascript" src="/assets/js/main.js"></script>
</head>

<body>
    <div class="default-wrap">
        <header id="mySidenav" class="default-header">
	<div class="default-header-inner">
		<div class=""><a href="/"><img class="img-fluid default-header-photo" src="/assets/img/max-wirt.jpg" alt="An artistic picture of Max Wirt"></a></div>
		<div id="menu">
		<h1 class="home-title">Max Wirt Maximum Website</h1>
		<p class="email">me@maxwirt.com</p>
		<ul class="social-icons">
			<a target="_blank" href="https://www.facebook.com/max.wirt.3"><li><span><i class="fab fa-facebook"></i></span></li></a>
			<a target="_blank" href="https://www.instagram.com/sincerelytv/"><li><span><i class="fab fa-instagram"></i></span></li></a>
			<a target="_blank" href="https://twitter.com/goldpaintboy"><li><span><i class="fab fa-twitter"></i></span></li></a>
			<a target="_blank" href="https://github.com/mwirt/"><li><span><i class="fab fa-github"></i></span></li></a>
		</ul>
		<nav class="site-navigation">
			<ul>
				<!--
				<a href="/blog"><li class="nav-item">Blog<span class="emoji-wrap"><i class="em em-notebook"></i></span></li></a>
			-->
				<!--
				<a href="/about"><li class="nav-item">About Me<span class="emoji-wrap"><i class="em em-slightly_smiling_face"></i></span></li></a>
			-->
				<a href="/katiescrossing"><li class="nav-item">Katies Crossing<span class="emoji-wrap"><i class="em em-female-detective"></i></span></li></a>
				<a href="/greatlakesmen"><li class="nav-item">Great Lakesmen<span class="emoji-wrap"><i class="em em-musical_note"></i></span></li></a>			
				<a href="/goldpaintboy"><li class="nav-item">Gold Paint Boy<span class="emoji-wrap"><i class="em em-guitar"></i></span></li></a>
				<a href="/shatteredmirrors"><li class="nav-item">Shattered Mirrors<span class="emoji-wrap"><i class="em em-cat"></i></span></li></a>
				
				<!--
				<a href="/webdesign"><li class="nav-item">Web Design<span class="emoji-wrap"><i class="em em-male-technologist"></i></span></li></a>
			-->
				<a href="/videoloop"><li class="nav-item">Video Loop Feedback<span class="emoji-wrap"><i class="em em-video_camera"></i></span></li></a>
				<!--
				<a href="/videobooth"><li class="nav-item">Video Booth<span class="emoji-wrap"><i class="em em-tv"></i></span></li></a>
			-->
				<a href="/richardalbum"><li class="nav-item">Richard Album Videos<span class="emoji-wrap"><i class="em em-microphone"></i></span></li></a>
				
				<a href="/iloveyoucharles"><li class="nav-item">I Love You Charles<span class="emoji-wrap"><i class="em em-dog"></i></span></li></a>
				<a href="/ichthyodyssey"><li class="nav-item">Ichthyodyssey<span class="emoji-wrap"><i class="em em-fish"></i></span></li></a>
				<a target="_blank" href="http://tequilatrails.us"><li class="nav-item">Tequila Trails<span class="emoji-wrap"><i class="em em-bicyclist"></i></span></li></a>
				<a target="_blank" href="http://sincerely.tv"><li class="nav-item">Sincerely Productions<span class="emoji-wrap"><i class="em em-movie_camera"></i></span></li></a>
			</ul>
		</nav>
	</div>
	</div>
</header>
        <div class="default-inner">
            <div class="mobile-header">
                <span class="toggle-button" onclick="navFunction()"><i id="nav-icon" class="fas fa-bars"></i></span>
            </div>
            <div class="container-fluid">
                <div class="inner-container">
                    <div style="background-image: url('/assets/img/bg/tile1.jpg');" class="background">
	<div class="liner">

<div class="post-container">
<article class="container">
	<!--
	<a class="black" href="/blog"><span class="back-wrap"><span class="back-icon"><i class="fa fa-backward icon"></i></span>Blog Index</span></a>
-->
<div class="entry">
	<div class="blog-text post-header"><h2 class="post-title">Feedback Loops with OpenCV</h2>
	<h3 class="post-date">14 May 2018</h3>
</div>

<div style="background-image: url('/assets/img/opencv/opencvloop9.jpg')" class="post-banner"></div>


<div class="blog-text">
    Last week I had some free time so I learned <a href="https://docs.opencv.org/3.4/index.html">how to set up OpenCV</a>, pulled out a thrift store webcam, and started tinkering. <a href="https://opencv.org/">OpenCV</a> is a suuuper cooool and powerful library that you can use to do all kinds of amazing things with robotics and security systems and smart phones and its changing the world and so of course I <i>had</i> to sit down with it and make my face look weird.
</div>
<div class="blog-text">
    I played around with some of the blurs and color filtering capabilities just to kinda see how it all worked and got some promising results:
</div>
<div class="row align-items-center">
    <div class="img-wrap col-sm-6"><a href="/assets/img/opencv/opencvloop30.png" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop30.png"></a></div>
    <div class="img-wrap col-sm-6"><a href="/assets/img/opencv/opencvloop29.png" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop29.png"></a></div>
</div>
<div class="row align-items-center rowfix">
    <div class="img-wrap col-sm-6"><a href="/assets/img/opencv/opencvloop25.png" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop25.png"></a></div>
    <div class="img-wrap col-sm-6"><a href="/assets/img/opencv/opencvloop27.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop27.jpg"></a></div>
</div>
<div class="blog-text centered-text">
    I found a setting I liked, turned the camera toward the monitor to create a loop, and got some lovely glitchy goodness...
</div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop1.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop1.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop2.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop2.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop3.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop3.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop4.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop4.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop5.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop5.jpg"></a></div>
<div class="blog-text">
    <p>There's additional images at the bottom of this post.</p>
    <p>OpenCV is capable of doing a great deal more than just producing trippy images but as someone who loves trippy images, I'm quite pleased with this kind of thing. Maybe one day I'll figure out how to do all the important life changing stuff with OpenCV, but for now enjoy these bent and beautiful computer paintings.</p>
</div>
<div class="blog-text">I used python for this and if you are interested in looking at the code I used to achieve these images, see below! You'll need to have OpenCV installed though which itself can be a challenge. I found it easiest to use the <a href="https://www.anaconda.com/what-is-anaconda/">Anaconda</a> package manager which I already had on my machine. </div>
<div class="code-wrap">
    <code>
<figure class="highlight"><pre><code class="language-python" data-lang="python"><span class="kn">import</span> <span class="nn">cv2</span>
<span class="kn">import</span> <span class="nn">random</span>


<span class="c"># set frame counter</span>

<span class="n">count</span> <span class="o">=</span> <span class="mi">0</span>


<span class="c"># I have two webcams, one is connected via usb and the other is built into the monitor.</span>
<span class="c"># To create a loop by turning the camera on the monitor, you will need a webcam that is separate from the monitor.</span>

<span class="n">cap</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">VideoCapture</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span> <span class="c"># USB webcam</span>


<span class="k">while</span><span class="p">(</span><span class="bp">True</span><span class="p">):</span>
    
    <span class="c"># Capture frame-by-frame</span>
    
    <span class="n">ret</span><span class="p">,</span> <span class="n">frame</span> <span class="o">=</span> <span class="n">cap</span><span class="o">.</span><span class="n">read</span><span class="p">()</span>


    <span class="c"># Resize playback windows, width is desired new width</span>
    
    <span class="n">width</span> <span class="o">=</span> <span class="mi">600</span> <span class="c"># change this number to desired width</span>
    <span class="n">r</span> <span class="o">=</span> <span class="n">width</span> <span class="o">/</span> <span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span>
    <span class="n">height</span> <span class="o">=</span> <span class="nb">int</span><span class="p">(</span><span class="n">frame</span><span class="o">.</span><span class="n">shape</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span> <span class="o">*</span> <span class="n">r</span><span class="p">)</span>
    <span class="n">dim</span> <span class="o">=</span> <span class="p">(</span><span class="n">width</span><span class="p">,</span><span class="n">height</span><span class="p">)</span>
    
    <span class="n">resized</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">resize</span><span class="p">(</span><span class="n">frame</span><span class="p">,</span> <span class="n">dim</span><span class="p">,</span> <span class="n">interpolation</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">INTER_AREA</span><span class="p">)</span>
    

    <span class="c"># Add effects</span>
    
    <span class="n">blur</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">GaussianBlur</span><span class="p">(</span><span class="n">resized</span><span class="p">,(</span><span class="mi">11</span><span class="p">,</span><span class="mi">11</span><span class="p">),</span><span class="mi">100</span><span class="p">)</span>
    <span class="n">filt</span> <span class="o">=</span> <span class="n">cv2</span><span class="o">.</span><span class="n">bilateralFilter</span><span class="p">(</span><span class="n">blur</span><span class="p">,</span><span class="mi">33</span><span class="p">,</span><span class="mi">75</span><span class="p">,</span><span class="mi">75</span><span class="p">)</span>
    

    <span class="c"># convert to HSV from BGR</span>
    
    <span class="n">hsv</span><span class="o">=</span><span class="n">cv2</span><span class="o">.</span><span class="n">cvtColor</span><span class="p">(</span><span class="n">filt</span><span class="p">,</span> <span class="n">cv2</span><span class="o">.</span><span class="n">COLOR_BGR2HSV</span><span class="p">)</span>
    

    <span class="c"># show the windows with the images</span>

    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s">'orig'</span><span class="p">,</span> <span class="n">resized</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">imshow</span><span class="p">(</span><span class="s">'result'</span><span class="p">,</span> <span class="n">hsv</span><span class="p">)</span>


    <span class="c"># move windows so they don't overlap</span>
    
    <span class="n">cv2</span><span class="o">.</span><span class="n">moveWindow</span><span class="p">(</span><span class="s">'orig'</span><span class="p">,</span><span class="mi">0</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    <span class="n">cv2</span><span class="o">.</span><span class="n">moveWindow</span><span class="p">(</span><span class="s">'result'</span><span class="p">,</span><span class="n">width</span><span class="p">,</span><span class="mi">0</span><span class="p">)</span>
    

    <span class="c"># this will write a jpg every five frames from the result</span>
        
    <span class="k">if</span> <span class="n">count</span><span class="o">%</span><span class="mi">5</span> <span class="o">==</span> <span class="mi">0</span><span class="p">:</span>
        <span class="n">cv2</span><span class="o">.</span><span class="n">imwrite</span><span class="p">(</span><span class="s">'pics/opencv/capture</span><span class="si">%</span><span class="s">d.jpg'</span><span class="o">%</span><span class="p">(</span><span class="n">random</span><span class="o">.</span><span class="n">randint</span><span class="p">(</span><span class="mi">1</span><span class="p">,</span><span class="mi">10000000</span><span class="p">)),</span><span class="n">hsv</span><span class="p">)</span>
        <span class="k">print</span><span class="p">(</span><span class="s">'captured frame'</span><span class="p">)</span>
    

    <span class="n">count</span><span class="o">+=</span><span class="mi">1</span>


    <span class="c"># press 'q' to stop</span>
    
    <span class="k">if</span> <span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span> <span class="o">&amp;</span> <span class="mh">0xFF</span> <span class="o">==</span> <span class="nb">ord</span><span class="p">(</span><span class="s">'q'</span><span class="p">):</span>
        <span class="k">break</span>


<span class="c"># When everything is done, this releases the capture</span>

<span class="n">cap</span><span class="o">.</span><span class="n">release</span><span class="p">()</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">destroyAllWindows</span><span class="p">()</span>
<span class="n">cv2</span><span class="o">.</span><span class="n">waitKey</span><span class="p">(</span><span class="mi">1</span><span class="p">)</span></code></pre></figure>
</code>
</div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop6.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop6.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop7.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop7.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop8.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop8.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop9.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop9.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop10.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop10.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop11.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop11.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop12.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop12.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop13.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop13.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop14.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop14.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop15.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop15.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop16.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop16.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop17.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop17.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop18.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop18.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop19.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop19.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop21.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop21.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop22.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop22.jpg"></a></div>
<div class="img-wrap col-sm-12"><a href="/assets/img/opencv/opencvloop23.jpg" data-fancybox="gallery"><img class="blog-img img-fluid" src="/assets/img/opencv/opencvloop23.jpg"></a></div>
</div>
<!--
<a class="black" href="/blog"><div class="back-wrap footer-back-wrap"><span class="back-icon"><i class="fa fa-backward icon"></i></span>Blog Index</div></a>
-->
</article>
</div>
</div>
</div>
                </div>
            </div>
        </div>
    </div>
</body>

</html>